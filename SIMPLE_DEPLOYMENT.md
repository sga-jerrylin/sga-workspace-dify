# ğŸš€ ç®€åŒ–éƒ¨ç½²æŒ‡å— - è§£å†³åˆå§‹åŒ–é—®é¢˜

## é—®é¢˜æè¿°

åœ¨æ–°æœºå™¨éƒ¨ç½²æ—¶ï¼Œåˆå§‹åŒ–æµç¨‹å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š
- æ•°æ®åº“è¿æ¥ä¸ç¨³å®š
- åˆå§‹åŒ–é¡µé¢åŠ è½½å¤±è´¥
- ç®¡ç†å‘˜è´¦æˆ·åˆ›å»ºå¤±è´¥
- é¡µé¢è·³è½¬é€»è¾‘å¤æ‚

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

æˆ‘ä»¬æä¾›äº†**ä¸‰ç§åˆå§‹åŒ–æ–¹å¼**ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æˆåŠŸåˆå§‹åŒ–ï¼š

### æ–¹å¼1: ä¸€é”®åˆå§‹åŒ–è„šæœ¬ â­ **æ¨è**

è¿™æ˜¯æœ€ç®€å•ã€æœ€å¯é çš„æ–¹å¼ï¼š

```bash
# 1. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 2. ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆï¼ˆçº¦30ç§’ï¼‰
docker-compose logs -f app

# 3. è¿è¡Œä¸€é”®åˆå§‹åŒ–
npm run quick-init

# 4. éªŒè¯åˆå§‹åŒ–ç»“æœ
npm run verify-init
```

**ä¼˜ç‚¹ï¼š**
- ä¸ä¾èµ–Webç•Œé¢
- ç›´æ¥æ“ä½œæ•°æ®åº“
- æœ‰è¯¦ç»†çš„é”™è¯¯æç¤º
- æ”¯æŒå¼ºåˆ¶é‡æ–°åˆå§‹åŒ–

### æ–¹å¼2: Webç•Œé¢åˆå§‹åŒ–

å¦‚æœä½ æ›´å–œæ¬¢å›¾å½¢ç•Œé¢ï¼š

```bash
# 1. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 2. è®¿é—®ç³»ç»Ÿ
http://localhost:8100

# 3. ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶è·³è½¬åˆ°åˆå§‹åŒ–é¡µé¢
# 4. å¡«å†™ç®¡ç†å‘˜ä¿¡æ¯å¹¶æäº¤
```

**æ”¹è¿›ç‚¹ï¼š**
- å¢å¼ºäº†é”™è¯¯å¤„ç†
- ä¼˜åŒ–äº†é¡µé¢è·³è½¬é€»è¾‘
- æ·»åŠ äº†æ›´è¯¦ç»†çš„éªŒè¯

### æ–¹å¼3: ä¼ ç»Ÿè„šæœ¬åˆå§‹åŒ–

ä½¿ç”¨åŸæœ‰çš„åˆå§‹åŒ–è„šæœ¬ï¼š

```bash
# åŸºç¡€åˆå§‹åŒ–
npm run init-admin

# å¼ºåˆ¶é‡æ–°åˆå§‹åŒ–
npm run force-init-admin
```

## ğŸ“‹ è¯¦ç»†æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

```bash
# æ£€æŸ¥Dockerç¯å¢ƒ
docker --version
docker-compose --version

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep -E ":(8100|5433|6380)"
```

### ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

```bash
# ç¡®ä¿.envæ–‡ä»¶å­˜åœ¨å¹¶é…ç½®æ­£ç¡®
cat .env | grep -E "(DATABASE_URL|POSTGRES_)"
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose logs -f app
```

### ç¬¬å››æ­¥ï¼šè¿è¡Œåˆå§‹åŒ–

**æ¨èä½¿ç”¨ä¸€é”®åˆå§‹åŒ–ï¼š**

```bash
# è¿è¡Œåˆå§‹åŒ–è„šæœ¬
npm run quick-init

# å¦‚æœéœ€è¦é‡æ–°åˆå§‹åŒ–
npm run quick-init:force
```

### ç¬¬äº”æ­¥ï¼šéªŒè¯éƒ¨ç½²

```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
npm run verify-init

# æ‰‹åŠ¨éªŒè¯
curl http://localhost:8100/api/health
```

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥PostgreSQLå®¹å™¨
docker-compose logs postgres

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
npm run db:status

# é‡å¯æ•°æ®åº“
docker-compose restart postgres
```

### é—®é¢˜2: åˆå§‹åŒ–è„šæœ¬å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
npm run quick-init 2>&1 | tee init.log

# æ£€æŸ¥æ•°æ®åº“è¡¨
docker-compose exec postgres psql -U ai_user -d ai_workspace -c "\dt"

# å¼ºåˆ¶é‡æ–°åˆå§‹åŒ–
npm run quick-init:force
```

### é—®é¢˜3: Webç•Œé¢æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥åº”ç”¨å®¹å™¨
docker-compose logs app

# æ£€æŸ¥Nginxå®¹å™¨
docker-compose logs nginx

# é‡å¯åº”ç”¨
docker-compose restart app nginx
```

### é—®é¢˜4: ç®¡ç†å‘˜è´¦æˆ·é—®é¢˜

```bash
# æ£€æŸ¥ç®¡ç†å‘˜è´¦æˆ·
npm run check-admin

# é‡æ–°åˆ›å»ºç®¡ç†å‘˜
npm run create-admin

# éªŒè¯ç™»å½•
curl -X POST http://localhost:8100/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"identifier":"admin","password":"123456","type":"user_id"}'
```

## ğŸ“Š éªŒè¯æ¸…å•

è¿è¡Œ `npm run verify-init` åï¼Œç¡®ä¿ä»¥ä¸‹é¡¹ç›®éƒ½é€šè¿‡ï¼š

- âœ… æ•°æ®åº“è¿æ¥
- âœ… åˆå§‹åŒ–æ ‡è®°æ–‡ä»¶
- âœ… ç®¡ç†å‘˜è´¦æˆ·
- âœ… å…¬å¸ä¿¡æ¯
- âœ… APIæ¥å£

## ğŸ‰ æˆåŠŸæ ‡å¿—

å½“çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯æ—¶ï¼Œè¯´æ˜åˆå§‹åŒ–æˆåŠŸï¼š

```
ğŸ‰ ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼
==================================================
ğŸ“‹ ç™»å½•ä¿¡æ¯:
   ç”¨æˆ·å: admin
   ç”¨æˆ·ID: admin
   å¯†ç : 123456
   è§’è‰²: ADMIN
   å§“å: ç³»ç»Ÿç®¡ç†å‘˜
   é‚®ç®±: admin@sologenai.com
   æ‰‹æœº: 13800138000
==================================================
ğŸŒ ç°åœ¨å¯ä»¥è®¿é—®ç³»ç»Ÿäº†:
   http://localhost:8100 (å¦‚æœä½¿ç”¨Docker)
   http://localhost:3000 (å¦‚æœç›´æ¥è¿è¡Œ)

âœ… ä½¿ç”¨ä¸Šé¢çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•ç³»ç»Ÿï¼
```

## ğŸš¨ ç´§æ€¥æ¢å¤

å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥ï¼Œä½¿ç”¨ç´§æ€¥æ¢å¤ï¼š

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# 2. æ¸…ç†æ•°æ®ï¼ˆâš ï¸ ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰
docker-compose down -v

# 3. é‡æ–°å¯åŠ¨
docker-compose up -d

# 4. ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 30

# 5. å¼ºåˆ¶åˆå§‹åŒ–
npm run quick-init:force

# 6. éªŒè¯ç»“æœ
npm run verify-init
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. è¿è¡Œç¯å¢ƒï¼ˆæ“ä½œç³»ç»Ÿã€Dockerç‰ˆæœ¬ï¼‰
2. é”™è¯¯æ—¥å¿—ï¼ˆ`docker-compose logs app`ï¼‰
3. åˆå§‹åŒ–æ—¥å¿—ï¼ˆ`npm run quick-init 2>&1 | tee init.log`ï¼‰
4. éªŒè¯ç»“æœï¼ˆ`npm run verify-init`ï¼‰

---

**è®°ä½ï¼šä½¿ç”¨ `npm run quick-init` æ˜¯æœ€ç®€å•å¯é çš„åˆå§‹åŒ–æ–¹å¼ï¼**
